<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Water Intake Reminder</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6f8;
    }

    .container {
        width: 440px;
        margin: 70px auto;
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 12px rgba(0,0,0,0.15);
    }

    h2 {
        text-align: center;
    }

    input, select, button {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
    }

    button {
        background: #007bff;
        color: white;
        border: none;
        cursor: pointer;
    }

    button:hover {
        background: #0056b3;
    }

    .done-btn {
        background: #28a745;
    }

    .done-btn:disabled {
        background: #999;
        cursor: not-allowed;
    }

    .box {
        margin-top: 15px;
        background: #e9f5ff;
        padding: 12px;
        border-radius: 5px;
    }

    .milestone {
        background: #f1f1f1;
        font-size: 18px;
    }

    .stopwatch {
        font-size: 22px;
        animation: spin 2s linear infinite;
        display: inline-block;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
</style>
</head>

<body>

<div class="container">
    <h2>üíß Water Intake Reminder</h2>

    <input type="text" id="name" placeholder="Enter your name">
    <input type="number" id="age" placeholder="Enter your age">
    <input type="number" id="weight" placeholder="Enter your weight (kg)">

    <select id="hours">
        <option value="">Select Active Hours</option>
        <option value="6">6 Hours</option>
        <option value="10">10 Hours</option>
        <option value="12">12 Hours</option>
        <option value="14">14 Hours</option>
    </select>

    <select id="interval">
        <option value="">Select Reminder Interval</option>
        <option value="2">Every 2 Minutes (Demo)</option>
        <option value="25">Every 25 Minutes</option>
        <option value="30">Every 30 Minutes</option>
        <option value="45">Every 45 Minutes</option>
        <option value="60">Every 1 Hour</option>
    </select>

    <button onclick="startReminder()">Start Reminder</button>

    <div class="box" id="result"></div>

    <div class="box" id="countdownBox" style="display:none;">
        <span class="stopwatch">‚è±Ô∏è</span><br>
        ‚è≥ Next glass in: <strong><span id="countdown"></span></strong>
    </div>

    <button class="done-btn" id="doneBtn" style="display:none;" onclick="markDone()">
        ‚úÖ Done (I drank water)
    </button>

    <div class="box milestone" id="milestone" style="display:none;"></div>
</div>

<script>
let reminderTimer, countdownTimer;
let glassCount = 0, maxGlasses = 0;
let remainingSeconds = 0;

function recommendInterval(activeHours) {
    if (activeHours == 6) return 60;
    if (activeHours == 10) return 45;
    if (activeHours == 12) return 30;
    if (activeHours == 14) return 25;
    return 60;
}

function startReminder() {
    let name = document.getElementById("name").value;
    let age = document.getElementById("age").value;
    let weight = document.getElementById("weight").value;
    let hours = document.getElementById("hours").value;
    let interval = document.getElementById("interval").value;

    if (name === "" || age === "" || weight === "" || hours === "") {
        alert("Please fill all fields");
        return;
    }

    // Auto recommend interval if not selected
    if (interval === "") {
        interval = recommendInterval(hours);
    }

    glassCount = 0;

    let dailyWater = (weight * 0.033).toFixed(2);
    maxGlasses = Math.ceil((dailyWater * 1000) / 250);

    document.getElementById("result").innerHTML =
        "üëã Hello <strong>" + name + "</strong><br>" +
        "üéÇ Age: " + age + "<br>" +
        "‚öñÔ∏è Weight: " + weight + " kg<br><br>" +
        "üíß Daily Target: <strong>" + dailyWater + " L</strong><br>" +
        "ü•õ Glass Goal: <strong>" + maxGlasses + "</strong><br>" +
        "‚è±Ô∏è Recommended Interval: <strong>Every " + interval + " minutes</strong>";

    document.getElementById("doneBtn").style.display = "block";
    document.getElementById("milestone").style.display = "block";
    document.getElementById("countdownBox").style.display = "block";
    document.getElementById("doneBtn").disabled = false;

    clearInterval(reminderTimer);
    clearInterval(countdownTimer);

    remainingSeconds = interval * 60;
    updateCountdown();

    countdownTimer = setInterval(updateCountdown, 1000);

    reminderTimer = setInterval(() => {
        if (Notification.permission === "granted") {
            new Notification("üíß Water Reminder", {
                body: "Time to drink a glass of water ü•õ"
            });
        }
        remainingSeconds = interval * 60;
    }, interval * 60 * 1000);

    updateMilestone();
}

function updateCountdown() {
    let min = Math.floor(remainingSeconds / 60);
    let sec = remainingSeconds % 60;
    document.getElementById("countdown").innerText = min + "m " + sec + "s";
    remainingSeconds--;
}

function markDone() {
    if (glassCount >= maxGlasses) return;

    glassCount++;
    updateMilestone();

    if (glassCount === maxGlasses) {
        alert("üéâ Great! You have completed your daily water intake milestone.");
        document.getElementById("doneBtn").disabled = true;
    }
}

function updateMilestone() {
    document.getElementById("milestone").innerHTML =
        "üìä Progress: " + glassCount + " / " + maxGlasses + "<br>" +
        "ü•õ".repeat(glassCount);
}
</script>

</body>
</html>
