<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Water Intake Reminder</title>

<style>
:root{
    --bg:#f4f6f8; --card:#fff; --text:#000; --accent:#0d6efd;
}
body.dark{
    --bg:#121212; --card:#1e1e1e; --text:#fff;
}
body{
    margin:0; font-family:Arial,sans-serif;
    background:var(--bg); color:var(--text);
}
.container{
    max-width:420px; margin:40px auto;
    background:var(--card); padding:25px;
    border-radius:18px;
    box-shadow:0 10px 25px rgba(0,0,0,.2);
}
h2{text-align:center;}
input,select,button{
    width:100%; padding:12px; margin-top:12px;
    border-radius:10px; border:1px solid #ccc;
}
button{
    background:var(--accent); color:#fff;
    border:none; font-size:16px;
}
.done-btn{background:#28a745;}
.done-btn:disabled{background:#777;}
.box{
    margin-top:15px; padding:15px;
    border-radius:12px; background:#e9f5ff;
}
body.dark .box{background:#2a2a2a;}
.alarm{
    display:none; background:#ffdddd;
    padding:15px; border-radius:12px;
    text-align:center; font-size:18px;
    animation:pulse 1s infinite;
}
@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.05);}
    100%{transform:scale(1);}
}
.toggle{
    position:fixed; top:20px; right:20px;
}
.toggle input{display:none;}
.toggle label{
    width:55px;height:28px;background:#ccc;
    display:block;border-radius:20px;position:relative;
}
.toggle label::after{
    content:"";width:22px;height:22px;
    background:#fff;position:absolute;
    top:3px;left:3px;border-radius:50%;
    transition:.3s;
}
.toggle input:checked+label{background:#0d6efd;}
.toggle input:checked+label::after{left:30px;}
.iphone-box{
    background:#fff3cd;border-left:5px solid #ff9800;
}
</style>
</head>

<body>

<!-- Dark Mode -->
<div class="toggle">
    <input type="checkbox" id="darkToggle" onchange="toggleDark()">
    <label for="darkToggle"></label>
</div>

<div class="container">
<h2>üíß Water Intake Reminder</h2>

<input id="name" placeholder="Name">
<input id="age" type="number" placeholder="Age">
<input id="weight" type="number" placeholder="Weight (kg)">

<select id="hours">
    <option value="">Active Hours</option>
    <option value="6">6 Hours</option>
    <option value="10">10 Hours</option>
    <option value="12">12 Hours</option>
    <option value="14">14 Hours</option>
</select>

<select id="interval">
    <option value="">Interval (Auto)</option>
    <option value="2">2 min (Demo)</option>
    <option value="25">25 min</option>
    <option value="30">30 min</option>
    <option value="45">45 min</option>
    <option value="60">60 min</option>
</select>

<button onclick="startReminder()">Start Reminder</button>

<div class="box" id="result"></div>

<div class="box" id="countdownBox" style="display:none;">
‚è≥ Next glass in: <b id="countdown"></b>
</div>

<div class="alarm" id="alarmBox">üö® TIME TO DRINK WATER ü•õ</div>

<button class="done-btn" id="doneBtn" style="display:none;" onclick="markDone()">
‚úÖ Yes, Water is Drank
</button>

<div class="box" id="milestone"></div>

<!-- iPhone section -->
<div class="box iphone-box" id="iphoneBox" style="display:none;">
üçé <b>iPhone User</b><br><br>
Safari blocks web alarms.<br>
Tap below to open Clock app and set alarm manually.<br><br>
<button onclick="openIphoneAlarm()">‚è∞ Open iPhone Alarm</button>
</div>

</div>

<audio id="beep" loop>
<source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg">
</audio>

<script>
let reminderTimer,countdownTimer,remainingSeconds=0;
let glassCount=0,maxGlasses=0;

function toggleDark(){document.body.classList.toggle("dark");}
function isIphone(){return /iPhone|iPad|iPod/i.test(navigator.userAgent);}

function recommendedInterval(h){
    if(h==6) return 60;
    if(h==10) return 45;
    if(h==12) return 30;
    if(h==14) return 25;
    return 60;
}

function startReminder(){
    let n=name.value,a=age.value,w=weight.value,h=hours.value;
    let i=interval.value;

    if(!n||!a||!w||!h){alert("Fill all fields");return;}
    if(!i) i=recommendedInterval(h);

    glassCount=0;
    let daily=(w*0.033).toFixed(2);
    maxGlasses=Math.ceil((daily*1000)/250);

    result.innerHTML=
    `üëã Hello <b>${n}</b><br>
     üéÇ Age: ${a}<br>
     ‚öñÔ∏è Weight: ${w} kg<br>
     üíß Target: <b>${daily} L</b><br>
     ü•õ Glasses: <b>${maxGlasses}</b><br>
     ‚è± Interval: ${i} min`;

    doneBtn.style.display="block";
    countdownBox.style.display="block";
    milestone.innerHTML="";
    doneBtn.disabled=false;

    clearInterval(reminderTimer);
    clearInterval(countdownTimer);

    remainingSeconds=i*60;
    updateCountdown();
    countdownTimer=setInterval(updateCountdown,1000);

    if(isIphone()){
        iphoneBox.style.display="block";
    }else{
        reminderTimer=setInterval(triggerAlarm,i*60*1000);
    }
}

function triggerAlarm(){
    alarmBox.style.display="block";
    beep.play().catch(()=>{});
    if(navigator.vibrate) navigator.vibrate([300,200,300]);
}

function updateCountdown(){
    let m=Math.floor(remainingSeconds/60);
    let s=remainingSeconds%60;
    countdown.innerText=`${m}m ${s}s`;
    remainingSeconds--;
}

function markDone(){
    alarmBox.style.display="none";
    beep.pause(); beep.currentTime=0;

    if(glassCount>=maxGlasses) return;
    glassCount++;

    milestone.innerHTML=
    `üìä Progress ${glassCount}/${maxGlasses}<br>`+"ü•õ".repeat(glassCount);

    if(glassCount===maxGlasses){
        alert("üéâ Great! Daily goal completed.");
        doneBtn.disabled=true;
    }
}

function openIphoneAlarm(){
    window.location.href="clock-alarm://";
}

/* shortcuts */
const name=document.getElementById("name");
const age=document.getElementById("age");
const weight=document.getElementById("weight");
const hours=document.getElementById("hours");
const interval=document.getElementById("interval");
const result=document.getElementById("result");
const countdown=document.getElementById("countdown");
const countdownBox=document.getElementById("countdownBox");
const alarmBox=document.getElementById("alarmBox");
const milestone=document.getElementById("milestone");
const doneBtn=document.getElementById("doneBtn");
const iphoneBox=document.getElementById("iphoneBox");
const beep=document.getElementById("beep");
</script>

</body>
</html>
